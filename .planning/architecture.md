# æŠ€æœ¯æ¶æ„è®¾è®¡

## 1. åˆ†é˜¶æ®µæ¶æ„æ¦‚è§ˆ

æœ¬æ¶æ„è®¾è®¡éµå¾ª**æ¸è¿›å¼å¼€å‘**åŸåˆ™ï¼šPhase 1 å®ç°å®Œæ•´çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒPhase 2 åœ¨ä¸é‡æ„æ ¸å¿ƒæ¨¡å—çš„å‰æä¸‹ï¼Œé€šè¿‡æ–°å¢æ¨¡å—å®ç°ç»ˆç«¯ä»£ç†åŠŸèƒ½ã€‚

### 1.1 Phase 1 æ¶æ„ï¼ˆå¿«æ·é”® + å‰ªè´´æ¿ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLIå‘½ä»¤è§£é‡ŠAgent (Phase 1)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è¾“å…¥æ•è·å™¨  â”‚ -> â”‚   å‘½ä»¤è§£æ   â”‚ -> â”‚   AIè§£é‡Šå¼•æ“ â”‚  â”‚
â”‚  â”‚ (Capturer)  â”‚    â”‚   (Parser)   â”‚    â”‚  (Explainer) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                       â”‚          â”‚
â”‚         â”‚                                       â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¿«æ·é”®ç®¡ç†  â”‚                        â”‚  é£é™©è¯„ä¼°å™¨  â”‚  â”‚
â”‚  â”‚  + å‰ªè´´æ¿   â”‚                        â”‚   (Risk)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                 â”‚          â”‚
â”‚                                                 â–¼          â”‚
â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                          â”‚  ç»“æœå±•ç¤º    â”‚  â”‚
â”‚                                          â”‚  (Display)   â”‚  â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Phase 2 æ¶æ„æ‰©å±•ï¼ˆç»ˆç«¯ä»£ç†ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLIå‘½ä»¤è§£é‡ŠAgent (Phase 2)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚           è¾“å…¥æ•è·å™¨ (Capturer)       â”‚ <-- æŠ½è±¡æ¥å£    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                  â”‚
â”‚  â”‚  â”‚ Clipboard   â”‚  â”‚ TerminalProxy â”‚ â”‚ <-- Phase 2 æ–°å¢ â”‚
â”‚  â”‚  â”‚ Capturer    â”‚  â”‚  Capturer     â”‚ â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚              â”‚                                              â”‚
â”‚              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     æ ¸å¿ƒå¤„ç†æµç¨‹ (Parser -> Explainer -> Risk)       â”‚  â”‚
â”‚  â”‚                   (Phase 1 ä»£ç å¤ç”¨)                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                              â”‚
â”‚              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              ç»“æœå±•ç¤º (Display)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 2.1 è¾“å…¥æ•è·å™¨ (Capturer) - **æ‰©å±•æ€§å…³é”®**

> **è®¾è®¡åŸåˆ™**ï¼šå®šä¹‰ç»Ÿä¸€çš„ `Capturer` æŠ½è±¡æ¥å£ï¼ŒPhase 1 å®ç° `ClipboardCapturer`ï¼ŒPhase 2 æ–°å¢ `TerminalProxyCapturer`ï¼Œæ ¸å¿ƒæµç¨‹æ— éœ€ä¿®æ”¹ã€‚

**Phase 1 å®ç°**ï¼š
- `ClipboardCapturer`ï¼šç›‘å¬å¿«æ·é”® â†’ è¯»å–å‰ªè´´æ¿ â†’ è¿”å›å‘½ä»¤å­—ç¬¦ä¸²

**Phase 2 æ‰©å±•ç‚¹**ï¼š
- `TerminalProxyCapturer`ï¼šå¯åŠ¨PTY â†’ æ•è·è¾“å‡ºæµ â†’ è¯†åˆ«å¾…ç¡®è®¤å‘½ä»¤ â†’ è¿”å›å‘½ä»¤å­—ç¬¦ä¸²

**æŠ½è±¡æ¥å£å®šä¹‰**ï¼š
```python
# src/capturer/base.py
from abc import ABC, abstractmethod
from typing import Callable

class BaseCapturer(ABC):
    """è¾“å…¥æ•è·å™¨æŠ½è±¡åŸºç±»ï¼Œä¸ºPhase 2æ‰©å±•é¢„ç•™æ¥å£"""
    
    @abstractmethod
    def start(self, callback: Callable[[str], None]) -> None:
        """å¯åŠ¨æ•è·ï¼Œå½“æ•è·åˆ°å‘½ä»¤æ—¶è°ƒç”¨callback"""
        pass
    
    @abstractmethod
    def stop(self) -> None:
        """åœæ­¢æ•è·"""
        pass
```

### 2.2 å‘½ä»¤è§£ææ¨¡å— (Parser)

**åŠŸèƒ½**ï¼š
- è¯†åˆ«å‘½ä»¤ç±»å‹ï¼ˆshellå‘½ä»¤ã€åŒ…ç®¡ç†å™¨ã€gitç­‰ï¼‰
- è§£æå‘½ä»¤ç»“æ„ï¼ˆå‘½ä»¤ã€å­å‘½ä»¤ã€å‚æ•°ã€é€‰é¡¹ï¼‰
- è¯†åˆ«æ•æ„Ÿæ“ä½œæ¨¡å¼

**å‘½ä»¤æ¨¡å¼åº“**ï¼š
```
å±é™©æ¨¡å¼ï¼š
- rm -rf *
- chmod 777
- sudo rm
- format/fdisk
- DROP TABLE

é«˜é£é™©æ¨¡å¼ï¼š
- rmï¼ˆåˆ é™¤æ–‡ä»¶ï¼‰
- npm install -g
- pip install
- git push --force
```

### 2.3 AIè§£é‡Šå¼•æ“ (Explainer)

**æ”¯æŒçš„AIæœåŠ¡**ï¼š
1. **OpenAI API** (GPT-4/GPT-3.5)
2. **ç¬¬ä¸‰æ–¹ API å¹³å°** (OpenRouter)
3. **æœ¬åœ°æ¨¡å‹** (Ollama)

**Promptè®¾è®¡è¦ç‚¹**ï¼š
- ç»“æ„åŒ–è¾“å‡ºï¼ˆJSONæ ¼å¼ï¼‰
- åŒ…å«é£é™©è¯„ä¼°
- ä¸­è‹±æ–‡åŒè¯­æ”¯æŒ
- ç»™å‡ºå…·ä½“å½±å“èŒƒå›´

### 2.4 é£é™©è¯„ä¼°å™¨ (Risk)

**è¯„ä¼°è§„åˆ™å¼•æ“**ï¼š
- åŸºäºå…³é”®è¯çš„å¿«é€Ÿé¢„è¯„ä¼°
- AIè¾…åŠ©çš„æ·±åº¦è¯„ä¼°
- ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼ˆå½“å‰ç›®å½•ã€æ–‡ä»¶ç±»å‹ç­‰ï¼‰

**é£é™©ç­‰çº§å®šä¹‰**ï¼š
```
ğŸŸ¢ ä½é£é™©ï¼šåªè¯»æ“ä½œã€æŸ¥çœ‹ä¿¡æ¯
ğŸŸ¡ ä¸­é£é™©ï¼šåˆ›å»º/ä¿®æ”¹æ–‡ä»¶ã€å®‰è£…è½¯ä»¶
ğŸŸ  é«˜é£é™©ï¼šåˆ é™¤æ–‡ä»¶ã€ä¿®æ”¹ç³»ç»Ÿé…ç½®
ğŸ”´ å±é™©ï¼šä¸å¯é€†æ“ä½œã€æ‰¹é‡åˆ é™¤ã€æƒé™å˜æ›´
```

### 2.5 ç»“æœå±•ç¤ºæ¨¡å— (Display)

**è¾“å‡ºæ ¼å¼**ï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“‹ å‘½ä»¤è§£é‡Š                                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  å‘½ä»¤ï¼šnpm install lodash                                 â•‘
â• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•£
â•‘  ğŸ“ æ¦‚è¿°ï¼šå®‰è£…lodashä¾èµ–åŒ…åˆ°å½“å‰é¡¹ç›®                       â•‘
â•‘                                                          â•‘
â•‘  ğŸ“Œ è¯¦ç»†è§£é‡Šï¼š                                            â•‘
â•‘  - npm install: Node.jsåŒ…ç®¡ç†å™¨çš„å®‰è£…å‘½ä»¤                  â•‘
â•‘  - lodash: ä¸€ä¸ªæµè¡Œçš„JavaScriptå·¥å…·åº“                     â•‘
â•‘                                                          â•‘
â•‘  ğŸ¯ å½±å“èŒƒå›´ï¼š                                            â•‘
â•‘  - ä¿®æ”¹ package.json                                     â•‘
â•‘  - åˆ›å»º/æ›´æ–° node_modules ç›®å½•                           â•‘
â•‘                                                          â•‘
â•‘  âš ï¸  é£é™©ç­‰çº§ï¼šğŸŸ¡ ä¸­é£é™©                                  â•‘
â•‘  - ä¼šä»ç½‘ç»œä¸‹è½½ä»£ç                                        â•‘
â•‘  - å¯èƒ½ä¿®æ”¹é¡¹ç›®ä¾èµ–ç»“æ„                                   â•‘
â•‘                                                          â•‘
â•‘  âœ… å»ºè®®ï¼šå¯ä»¥å®‰å…¨æ‰§è¡Œ                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 3. æŠ€æœ¯æ ˆé€‰æ‹©

### Phase 1 ä¾èµ–

| ç»„ä»¶ | æŠ€æœ¯é€‰æ‹© | ç†ç”± |
|------|----------|------|
| å¼€å‘è¯­è¨€ | Python 3.10+ | ä¸°å¯Œçš„åº“æ”¯æŒã€AIé›†æˆç®€å• |
| ç»ˆç«¯UI | Rich | ç¾è§‚çš„ç»ˆç«¯è¾“å‡º |
| é…ç½®ç®¡ç† | YAML | æ˜“è¯»æ˜“æ”¹ |
| AIæ¥å£ | LiteLLM | ç»Ÿä¸€å¤šAIæœåŠ¡æ¥å£ |
| å‰ªè´´æ¿ | pyperclip | è·¨å¹³å°å‰ªè´´æ¿æ“ä½œ |
| å¿«æ·é”® | keyboard | å…¨å±€å¿«æ·é”®ç›‘å¬ |

### Phase 2 é¢å¤–ä¾èµ–ï¼ˆé¢„ç•™ï¼‰

| ç»„ä»¶ | æŠ€æœ¯é€‰æ‹© | ç†ç”± |
|------|----------|------|
| ä¼ªç»ˆç«¯ | pywinpty (Windows) | Windows ConPTY å°è£… |
| è¿›ç¨‹ç®¡ç† | subprocess | å­è¿›ç¨‹æ§åˆ¶ |

---

## 4. ç›®å½•ç»“æ„

```
cli-command-explainer/
â”œâ”€â”€ .planning/                  # è§„åˆ’æ–‡æ¡£
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ capturer/               # è¾“å…¥æ•è·æ¨¡å— (æ‰©å±•ç‚¹)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py             # æŠ½è±¡åŸºç±» (Phase 2 æ‰©å±•æ¥å£)
â”‚   â”‚   â”œâ”€â”€ clipboard.py        # Phase 1: å‰ªè´´æ¿æ•è·
â”‚   â”‚   â”œâ”€â”€ hotkey.py           # Phase 1: å¿«æ·é”®ç›‘å¬
â”‚   â”‚   â””â”€â”€ terminal_proxy.py   # Phase 2: ç»ˆç«¯ä»£ç† (é¢„ç•™)
â”‚   â”‚
â”‚   â”œâ”€â”€ parser/                 # å‘½ä»¤è§£ææ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ command.py          # å‘½ä»¤è§£æå™¨
â”‚   â”‚   â””â”€â”€ patterns.py         # å±é™©æ¨¡å¼åº“
â”‚   â”‚
â”‚   â”œâ”€â”€ explainer/              # AIè§£é‡Šæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ engine.py           # è§£é‡Šå¼•æ“
â”‚   â”‚   â””â”€â”€ prompts.py          # Promptæ¨¡æ¿
â”‚   â”‚
â”‚   â”œâ”€â”€ risk/                   # é£é™©è¯„ä¼°æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ assessor.py         # é£é™©è¯„ä¼°å™¨
â”‚   â”‚
â”‚   â””â”€â”€ ui/                     # ç•Œé¢å±•ç¤ºæ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ display.py          # ç»“æœå±•ç¤º
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.yaml             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

> **æ³¨æ„**ï¼š`capturer/` æ¨¡å—é‡‡ç”¨ç­–ç•¥æ¨¡å¼ï¼Œ`base.py` å®šä¹‰æŠ½è±¡æ¥å£ï¼ŒPhase 2 åªéœ€æ–°å¢ `terminal_proxy.py` å®ç°ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ã€‚

---

## 5. æ•°æ®æµ

### Phase 1 æ•°æ®æµ

```
[ç”¨æˆ·å¤åˆ¶å‘½ä»¤] --> [æŒ‰ä¸‹å¿«æ·é”®]
                        â”‚
                        â–¼
              [ClipboardCapturer.capture()]
                        â”‚
                        â–¼
              [CommandParser.parse(cmd)]
                        â”‚
                        â–¼
              [RiskAssessor.precheck(parsed)]
                        â”‚
                        â–¼
              [ExplainerEngine.explain(cmd)]
                        â”‚
                        â–¼
              [RiskAssessor.merge(ai_result)]
                        â”‚
                        â–¼
              [DisplayManager.show(result)]
```

### Phase 2 æ•°æ®æµï¼ˆé¢„è§ˆï¼‰

```
[ç”¨æˆ·æ‰§è¡Œ agent run claude]
           â”‚
           â–¼
[TerminalProxyCapturerå¯åŠ¨PTY]
           â”‚
           â–¼
[å®æ—¶è¯»å–è¾“å‡ºæµ] --> [æ£€æµ‹åˆ°å¾…ç¡®è®¤å‘½ä»¤]
                            â”‚
                            â–¼
              [CommandParser.parse(cmd)]  <-- å¤ç”¨ Phase 1
                            â”‚
                            â–¼
              [...åç»­æµç¨‹ç›¸åŒ...]
```

---

## 6. Phase 2 æ‰©å±•è®¾è®¡è¦ç‚¹

ä¸ºç¡®ä¿ Phase 2 å¼€å‘æ—¶æ— éœ€é‡æ„ Phase 1 ä»£ç ï¼Œä»¥ä¸‹è®¾è®¡å†³ç­–éœ€è¦åœ¨ Phase 1 ä¸­é¢„å…ˆè€ƒè™‘ï¼š

1. **Capturer æŠ½è±¡**ï¼šæ‰€æœ‰è¾“å…¥æ¥æºéƒ½é€šè¿‡ `BaseCapturer` æ¥å£ï¼Œæ ¸å¿ƒæµç¨‹ä¸å…³å¿ƒå…·ä½“å®ç°
2. **é…ç½®é©±åŠ¨**ï¼š`config.yaml` ä¸­é¢„ç•™ `capturer.mode` å­—æ®µï¼ˆclipboard / terminal_proxyï¼‰
3. **æ¨¡å—åŒ–**ï¼šå„æ¨¡å—é€šè¿‡æ˜ç¡®çš„æ¥å£äº¤äº’ï¼Œé¿å…ç´§è€¦åˆ
4. **æ—¥å¿—ç³»ç»Ÿ**ï¼šç»Ÿä¸€çš„æ—¥å¿—æ¨¡å—ï¼ŒPhase 2 å¯æ— ç¼æ¥å…¥
