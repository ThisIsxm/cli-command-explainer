# 需求分析文档

## 1. 问题背景

使用CLI AI工具（如Claude Code、GitHub Copilot CLI）时，这些工具经常会提示用户确认执行某个命令。用户需要理解命令的含义和潜在风险才能做出决策，但：
- 许多命令语法复杂，不易理解
- 用户需要借助其他AI工具来解释命令，效率低下
- 缺乏统一的风险评估标准

## 2. 目标用户

- 使用AI CLI工具的开发者
- 对命令行不够熟悉的用户
- 关注安全性的技术人员

## 3. 功能需求

### 3.1 核心功能

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 终端监控 | 监测终端输出，识别待确认命令 | P0 |
| 命令解析 | 解析命令结构、参数、选项 | P0 |
| 命令解释 | 使用AI解释命令的作用 | P0 |
| 风险评估 | 评估命令的潜在风险等级 | P0 |
| 结果展示 | 以友好方式展示解释结果 | P1 |

### 3.2 监控范围

需要支持监测的CLI工具：
- **Claude Code** (Anthropic)
- **GitHub Copilot CLI**
- **Cursor** (如果使用终端)
- 其他类似AI代码助手

### 3.3 命令解释内容

解释应包含：
1. **命令概述**：一句话说明命令做什么
2. **详细解释**：逐参数解释
3. **影响范围**：命令会影响哪些文件/系统
4. **风险等级**：低/中/高/危险
5. **风险说明**：具体的潜在风险
6. **执行建议**：是否推荐执行

### 3.4 风险评估维度

| 维度 | 低风险 | 中风险 | 高风险 | 危险 |
|------|--------|--------|--------|------|
| 文件操作 | 读取 | 创建/修改 | 删除单个 | 批量删除/rm -rf |
| 系统操作 | 查看 | 安装软件 | 修改配置 | 修改权限/root操作 |
| 网络操作 | 本地请求 | 下载文件 | 上传数据 | 暴露敏感信息 |
| 不可逆性 | 可撤销 | 部分可逆 | 难以恢复 | 不可逆 |

## 4. 非功能需求

### 4.1 性能要求
- 命令解释响应时间 < 3秒
- 低资源占用，不影响主终端性能

### 4.2 可用性要求
- 简单的安装和配置
- 清晰的输出格式
- 支持中英文解释

### 4.3 兼容性要求
- 支持Windows PowerShell
- 支持Windows Terminal
- 支持常见终端模拟器

## 5. 技术约束

- **最小依赖**：尽量减少外部依赖
- **可扩展性**：支持添加新的CLI工具监控
- **隐私安全**：命令内容仅发送给可信AI服务
